<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Soslingmas SV IPB - 14 Desa Lengkap</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', system-ui, sans-serif; background-color: #f1f5f9; color: #1e293b; }
        .chart-container { position: relative; width: 100%; height: 280px; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 10px; }
    </style>
</head>
<body class="min-h-screen flex flex-col lg:flex-row">

    <aside class="w-full lg:w-80 bg-slate-900 text-white flex-shrink-0 h-auto lg:h-screen lg:sticky lg:top-0 overflow-y-auto z-10">
        <div class="p-6 border-b border-slate-700">
            <h1 class="font-bold text-xl tracking-wide"><i class="fas fa-map-marked-alt text-emerald-400 mr-2"></i>Soslingmas<span class="font-light">Full</span></h1>
            <p class="text-xs text-slate-400 mt-2">Database Lokasi Proker SV IPB<br>Total: 14 Lokasi Terdata</p>
        </div>
        
        <div class="p-4">
            <h3 class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3">Pilih Desa Analisis</h3>
            <div id="villageSelector" class="space-y-2 text-sm">
                </div>
        </div>
    </aside>

    <main class="flex-grow p-4 lg:p-8 overflow-y-auto">
        
        <header class="mb-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
            <div>
                <div class="flex items-center gap-3 mb-1">
                    <span class="bg-emerald-100 text-emerald-800 text-xs font-bold px-2 py-1 rounded uppercase tracking-wide">Hasil Riset</span>
                    <h2 class="text-3xl font-bold text-slate-900" id="detailName">Memuat...</h2>
                </div>
                <p class="text-slate-500 text-sm"><i class="fas fa-university mr-1 text-slate-400"></i> <span id="detailDistrict">...</span></p>
            </div>
            <div class="text-right">
                <div class="text-sm text-slate-500 mb-1">Skor Kecocokan Keseluruhan</div>
                <div class="text-4xl font-black text-emerald-600" id="detailTotalMatch">0%</div>
            </div>
        </header>

        <div class="grid md:grid-cols-2 gap-6 mb-8">

            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                <div class="flex justify-between items-start mb-4">
                    <h3 class="font-bold text-slate-800"><i class="fas fa-route text-blue-500 mr-2"></i>Jarak & Waktu</h3>
                    <span class="text-xl font-bold text-blue-600" id="scoreDistance">0%</span>
                </div>
                <div class="bg-blue-50 p-3 rounded-lg mb-3">
                    <div class="text-[10px] text-blue-600 uppercase font-bold mb-1">Estimasi ke SV IPB</div>
                    <div class="font-bold text-slate-800 text-lg" id="dataDistance">...</div>
                </div>
                <p class="text-sm text-slate-600 mb-4 h-12" id="reasonDistance">...</p>
                <a href="#" target="_blank" id="linkDistance" class="w-full inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg text-xs font-bold hover:bg-blue-700 transition">
                    <i class="fas fa-directions mr-2"></i> CEK RUTE GOOGLE MAPS
                </a>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                <div class="flex justify-between items-start mb-4">
                    <h3 class="font-bold text-slate-800"><i class="fas fa-building text-amber-500 mr-2"></i>Akses & Fasum</h3>
                    <span class="text-xl font-bold text-amber-600" id="scoreAccess">0%</span>
                </div>
                <div class="bg-amber-50 p-3 rounded-lg mb-3 border border-amber-100">
                    <div class="text-[10px] text-amber-700 uppercase font-bold mb-1">Fasilitas Terdekat</div>
                    <div class="text-sm font-bold text-slate-800 flex items-center gap-2">
                        <i class="fas fa-clinic-medical text-red-500"></i> Fasilitas: <span id="dataPuskesmas" class="font-normal text-xs text-slate-600">...</span>
                    </div>
                </div>
                <p class="text-sm text-slate-600 h-12" id="reasonAccess">...</p>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                <div class="flex justify-between items-start mb-4">
                    <h3 class="font-bold text-slate-800"><i class="fas fa-leaf text-emerald-500 mr-2"></i>Isu Lingkungan</h3>
                    <span class="text-xl font-bold text-emerald-600" id="scoreEnv">0%</span>
                </div>
                <div class="bg-emerald-50 p-3 rounded-lg mb-3">
                    <div class="text-[10px] text-emerald-700 uppercase font-bold mb-1">Fokus Proker</div>
                    <div class="font-bold text-slate-800 text-sm" id="dataEnv">...</div>
                </div>
                <p class="text-sm text-slate-600 h-12" id="reasonEnv">...</p>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                <div class="flex justify-between items-start mb-4">
                    <h3 class="font-bold text-slate-800"><i class="fas fa-shield-alt text-red-500 mr-2"></i>Akses Jalan</h3>
                    <span class="text-xl font-bold text-red-600" id="scoreSafety">0%</span>
                </div>
                <div class="bg-red-50 p-3 rounded-lg mb-3">
                    <div class="text-[10px] text-red-700 uppercase font-bold mb-1">Kondisi Jalan</div>
                    <div class="font-bold text-slate-800 text-sm" id="dataSafety">...</div>
                </div>
                <p class="text-sm text-slate-600 h-12" id="reasonSafety">...</p>
            </div>

        </div>

        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
            <h3 class="font-bold text-slate-800 mb-4">Visualisasi Skor Kriteria</h3>
            <div class="chart-container">
                <canvas id="comparisonChart"></canvas>
            </div>
        </div>

    </main>

    <script>
        const database = [
            { id: 1, name: "Kel. Babakan", district: "Kec. Bogor Tengah", scores: [98, 95, 88, 95], total: 94, distVal: "±1.5 KM", fasum: "Puskesmas Bogor Tengah", envVal: "Pengelolaan Sampah Kost", safetyVal: "Jalan lebar, aspal mulus", reasons: ["Sangat dekat kampus.", "Akses kota terbaik.", "Manajemen sampah padat.", "Sinyal internet kuat."], map: "https://www.google.com/maps/dir/Sekolah+Vokasi+IPB/Kelurahan+Babakan" },
            { id: 2, name: "Kel. Tegallega", district: "Kec. Bogor Tengah", scores: [96, 92, 85, 90], total: 91, distVal: "±2.0 KM", fasum: "Puskesmas & Klinik Dekat", envVal: "Urban Farming Lahan Sempit", safetyVal: "Jalan utama aspal mulus", reasons: ["Jarak tempuh < 10 menit.", "Sangat strategis.", "Potensi edukasi hidroponik.", "Akses angkot 24 jam."], map: "https://www.google.com/maps/dir/Sekolah+Vokasi+IPB/Kelurahan+Tegallega" },
            { id: 3, name: "Desa Situ Gede", district: "Kec. Bogor Barat", scores: [90, 85, 95, 88], total: 90, distVal: "±8.2 KM", fasum: "Dekat RSUD Kota Bogor", envVal: "Konservasi Hutan & Danau", safetyVal: "Jalan cukup lebar", reasons: ["Dekat area wisata CIFOR.", "Potensi Eco-Tourism.", "Waktu tempuh efisien.", "Kondusif untuk proker."], map: "https://www.google.com/maps/dir/Sekolah+Vokasi+IPB/Situ+Gede+Bogor" },
            { id: 4, name: "Kel. Sindangsari", district: "Kec. Bogor Timur", scores: [90, 88, 82, 85], total: 86, distVal: "±8.5 KM", fasum: "Puskesmas Pulo Armyn", envVal: "Polusi Udara & Industri", safetyVal: "Jalan Raya Pajajaran", reasons: ["Akses jalur utama Tajur.", "Mudah dijangkau kendaraan.", "Isu limbah bengkel/pabrik.", "Dekat pusat niaga."], map: "https://www.google.com/maps/dir/Sekolah+Vokasi+IPB/Sindangsari+Bogor" },
            { id: 5, name: "Desa Sukamantri", district: "Kec. Tamansari", scores: [86, 90, 92, 85], total: 88, distVal: "±11.5 KM", fasum: "Puskesmas Tamansari", envVal: "Edu-Wisata Pertanian", safetyVal: "Akses ideal via BNR", reasons: ["Akses sangat nyaman via BNR.", "Masyarakat sangat kooperatif.", "Udara bersih & sejuk.", "Bis medium bisa masuk."], map: "https://www.google.com/maps/dir/Sekolah+Vokasi+IPB/Sukamantri+Tamansari" },
            { id: 6, name: "Desa Pasir Eurih", district: "Kec. Tamansari", scores: [85, 86, 90, 82], total: 86, distVal: "±11.8 KM", fasum: "Situs Budaya Sindang Barang", envVal: "Kearifan Lokal & Budaya", safetyVal: "Tanjakan sedang, aspal", reasons: ["Dekat wisata budaya.", "Kental kearifan lokal.", "Jalan memadai untuk bis.", "Suasana desa asri."], map: "https://www.google.com/maps/dir/Sekolah+Vokasi+IPB/Pasir+Eurih+Bogor" },
            { id: 7, name: "Desa Kota Batu", district: "Kec. Ciomas", scores: [84, 82, 80, 80], total: 82, distVal: "±12.0 KM", fasum: "Puskesmas Ciomas", envVal: "Kepadatan Pemukiman", safetyVal: "Jalan aspal, ramai padat", reasons: ["Wilayah padat penduduk.", "Potensi edukasi sanitasi.", "Akses lewat Ciomas.", "Lalu lintas cukup ramai."], map: "https://www.google.com/maps/dir/Sekolah+Vokasi+IPB/Kota+Batu+Ciomas" },
            { id: 8, name: "Desa Benteng", district: "Kec. Ciampea", scores: [84, 85, 88, 82], total: 85, distVal: "±12.5 KM", fasum: "Puskesmas Ciampea", envVal: "UMKM Pangan & Home Industry", safetyVal: "Jalan beton & aspal", reasons: ["Akses jalur utama Dramaga.", "Potensi pemberdayaan UMKM.", "Masyarakat terbuka.", "Sinyal HP stabil."], map: "https://www.google.com/maps/dir/Sekolah+Vokasi+IPB/Desa+Benteng+Ciampea" },
            { id: 9, name: "Desa Bantarsari", district: "Kec. Rancabungur", scores: [82, 80, 82, 80], total: 81, distVal: "±13.8 KM", fasum: "Puskesmas Rancabungur", envVal: "Sanitasi & Sampah Rumah Tangga", safetyVal: "Akses via Yasmin (Beton)", reasons: ["Akses cepat via Yasmin.", "Kondisi jalan beton baik.", "Fokus isu sampah warga.", "Warga ramah tamah."], map: "https://www.google.com/maps/dir/Sekolah+Vokasi+IPB/Bantarsari+Rancabungur" },
            { id: 10, name: "Desa Cikarawang", district: "Kec. Dramaga", scores: [82, 85, 92, 85], total: 86, distVal: "±14.0 KM", fasum: "Dekat Kampus Dramaga", envVal: "Budidaya Ubi & Pertanian", safetyVal: "Jalan aspal pedesaan", reasons: ["Pusat riset pertanian IPB.", "Warga sangat agraris.", "Potensi inovasi pangan.", "Akses jalan cukup mulus."], map: "https://www.google.com/maps/dir/Sekolah+Vokasi+IPB/Cikarawang+Dramaga" },
            { id: 11, name: "Desa Cihideung Hilir", district: "Kec. Ciampea", scores: [80, 82, 85, 80], total: 82, distVal: "±15.0 KM", fasum: "Tersedia Bidan Desa", envVal: "Limbah Pertanian Tradisional", safetyVal: "Jalan aspal agak sempit", reasons: ["Sentra pembibitan tanaman.", "Masyarakat agraris kental.", "Akses via Ciampea.", "Sinyal internet cukup."], map: "https://www.google.com/maps/dir/Sekolah+Vokasi+IPB/Cihideung+Hilir" },
            { id: 12, name: "Desa Sinarsari", district: "Kec. Dramaga", scores: [78, 80, 85, 78], total: 80, distVal: "±15.5 KM", fasum: "Puskesmas Dramaga", envVal: "Limbah Pemukiman Padat", safetyVal: "Jalan aspal, banyak tikungan", reasons: ["Dekat dengan lingkar IPB.", "Isu kebersihan lingkungan.", "Masyarakat beragam.", "Akses motor sangat mudah."], map: "https://www.google.com/maps/dir/Sekolah+Vokasi+IPB/Sinarsari+Dramaga" },
            { id: 13, name: "Desa Bendogebang", district: "Kec. Ciawi", scores: [75, 78, 80, 72], total: 76, distVal: "±19.0 KM", fasum: "Puskesmas Ciawi", envVal: "Sampah Pasar & Niaga", safetyVal: "Rawan macet simpang", reasons: ["Dekat pusat keramaian Ciawi.", "Isu sampah pasar tradisional.", "Akses jalur Puncak.", "Fasilitas umum lengkap."], map: "https://www.google.com/maps/dir/Sekolah+Vokasi+IPB/Ciawi+Bogor" },
            { id: 14, name: "Desa Purwabakti", district: "Kec. Pamijahan", scores: [70, 70, 98, 88], total: 82, distVal: "±28.0 KM", fasum: "Puskesmas Pamijahan (Jauh)", envVal: "Konservasi & Sosial Budaya", safetyVal: "Jalan menanjak & curam", reasons: ["Jarak terjauh namun dampak tinggi.", "Warga sangat menjunjung tradisi.", "Potensi alam luar biasa.", "Rasa kekeluargaan tinggi."], map: "https://www.google.com/maps/dir/Sekolah+Vokasi+IPB/Purwabakti+Pamijahan" }
        ];

        let chartInstance = null;
        let selectedId = 1;

        function initApp() {
            renderSidebar();
            loadVillageData(selectedId);
        }

        function renderSidebar() {
            const container = document.getElementById('villageSelector');
            container.innerHTML = database.map(item => `
                <div onclick="loadVillageData(${item.id})" class="p-3 rounded-lg cursor-pointer transition flex justify-between items-center ${item.id === selectedId ? 'bg-emerald-600 text-white shadow-md' : 'bg-slate-800 text-slate-400 hover:bg-slate-700'}">
                    <div>
                        <div class="font-bold text-sm">${item.name}</div>
                        <div class="text-[10px] opacity-70">${item.district}</div>
                    </div>
                    <div class="font-bold">${item.total}%</div>
                </div>
            `).join('');
        }

        function loadVillageData(id) {
            selectedId = id;
            const data = database.find(d => d.id === id);
            renderSidebar();

            document.getElementById('detailName').innerText = data.name;
            document.getElementById('detailDistrict').innerText = data.district;
            document.getElementById('detailTotalMatch').innerText = data.total + "%";
            
            // Jarak
            document.getElementById('scoreDistance').innerText = data.scores[0] + "%";
            document.getElementById('dataDistance').innerText = data.distVal;
            document.getElementById('reasonDistance').innerText = data.reasons[0];
            document.getElementById('linkDistance').href = data.map;

            // Akses & Fasum
            document.getElementById('scoreAccess').innerText = data.scores[1] + "%";
            document.getElementById('dataPuskesmas').innerText = data.fasum;
            document.getElementById('reasonAccess').innerText = data.reasons[1];

            // Env
            document.getElementById('scoreEnv').innerText = data.scores[2] + "%";
            document.getElementById('dataEnv').innerText = data.envVal;
            document.getElementById('reasonEnv').innerText = data.reasons[2];

            // Safety
            document.getElementById('scoreSafety').innerText = data.scores[3] + "%";
            document.getElementById('dataSafety').innerText = data.safetyVal;
            document.getElementById('reasonSafety').innerText = data.reasons[3];

            updateChart(data.scores);
        }

        function updateChart(scores) {
            const ctx = document.getElementById('comparisonChart').getContext('2d');
            if (chartInstance) chartInstance.destroy();
            chartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Jarak', 'Akses', 'Lingkungan', 'Keamanan'],
                    datasets: [{
                        data: scores,
                        backgroundColor: ['#3b82f6', '#f59e0b', '#10b981', '#ef4444'],
                        borderRadius: 6,
                        barThickness: 40
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true, max: 100 } }
                }
            });
        }

        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
